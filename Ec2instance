
provider "aws" {
  region = "us-east-1"
  access_key = "AKIAW4V4WS3P7XZNK22Z"
  secret_key = "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"
}
resource "aws_instance" "DemoEc2" {
  instance_type = "t2.micro"
  ami           = "ami-053b0d53c279acc90"
  tags = {
    Name = "Example for Local Exec provisioner"
  }

  provisioner "local-exec" {
    command = "echo 'The public IP of the EC2 instance created is ${self.public_ip}' > Ec2created.txt"
  }

  provisioner "local-exec" {
    when    = "destroy"
    command = "echo 'The instance ${self.id} with public IP ${self.public_ip} has been deleted.' > Ec2deleted.txt"
  }
}
